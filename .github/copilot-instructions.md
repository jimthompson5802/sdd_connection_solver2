# Connection Solver Copilot Instructions

## Project Overview
This repository contains the codebase for the Connection Solver application, which provides puzzle-solving recommendations using large language models (LLMs). The project is structured into a Python backend and a React frontend, with comprehensive testing and documentation.

## root folder structure
- `backend` — Python backend application and test infrastructure containing source code, tests, configuration, and coverage reports that implement server-side recommendation and LLM integration.
- `chat_logs` — Collection of conversation logs and design notes used during development and planning.
- `data` — CSV datasets and word lists used as puzzle inputs and test data for the solver.
- `docs` — Project documentation and architecture notes describing system design and decisions.
- `frontend` — React frontend application source, assets, and tests providing the UI and client-side logic for interacting with the backend.
- `specs` — Specification documents and feature/requirement artifacts (e.g., puzzle specs and phase notes).
- `src` — Top-level package for shared or tooling code (contains project-level Python modules or scripts used by the repository).


## backend components
- `backend/htmlcov` — Contains the HTML coverage report output (navigable per-module pages and index) generated by the test coverage tool.
- `backend/src/api` — Holds the versioned API route implementations (`v2_providers.py`, `v2_recommendations.py`) that expose recommendation and provider endpoints.
- `backend/src/config` — Provides environment and configuration helpers (e.g., `environment.py`) for runtime settings and configuration loading.
- `backend/src/langchain_community/llms` — Integration shims for third-party LLMs (e.g., `ollama.py`) used by the app's language-model adapters.
- `backend/src/llm_models` — Data models and DTOs for LLM interactions and recommendation payloads (request/response and puzzle/state models).
- `backend/src/middleware` — Middleware utilities such as centralized error handling used by the web app pipeline.
- `backend/src/services/llm_providers` — Concrete LLM provider implementations and factory code (OpenAI, Ollama, simple provider, and provider factory).
- `backend/tests/contract` — Contract-style tests asserting the backend's public behaviors and configuration contracts.
- `backend/tests/e2e` — End-to-end tests validating end-to-end puzzle and system scenarios.
- `backend/tests/integration` — Integration tests covering interactions between components (APIs, providers, services).
- `backend/tests/mocks` — Mock objects and helpers (e.g., LLM mocks) used across tests to simulate external systems.
- `backend/tests/support` — Test support helpers and utilities used by multiple test suites.
- `backend/tests/unit` — Unit tests that validate individual modules and functions in isolation.

## frontend components
- `frontend/build` — Production build output containing the compiled static application artifacts produced by the frontend build process.
- `frontend/public` — Static public assets and HTML entry point files (images, `index.html`, manifest, and other static resources) served as-is by the web server.
- `frontend/src/components/__tests__` — Component-level unit tests that exercise individual UI components and their behaviors.
- `frontend/src/integration` — Integration test folder for in-repo integration tests (currently empty in this workspace).
- `frontend/src/tests/e2e` — End-to-end tests placed under `src` that validate full application flows and user interactions.
- `frontend/src/tests/integration` — Integration tests focused on component interactions and end-to-end slices in the source tree.
- `frontend/src/types` — TypeScript type definitions for API payloads, LLM provider contracts, puzzle models, and recommendations.
- `frontend/src/services` — Client-side service modules and API wrappers that interact with the backend and LLM endpoints.
- `frontend/src/unit` — Unit-test directory (currently empty) intended for isolated unit tests of source modules.
- `frontend/tests/components` — Higher-level component test files validating UI composition and behavior across components.
- `frontend/tests/e2e` — End-to-end test suite under `tests/` validating full application user flows.
- `frontend/tests/integration` — Integration tests under `tests/` covering provider selection and related interactions.
- `frontend/tests/mocks` — Mock implementations and fixtures used by frontend tests to simulate backend or service behavior.
- `frontend/tests/services` — Tests for client-side service modules and API wrappers.
- `frontend/tests/unit` — Unit-test placeholder under `tests/` (currently empty) for isolated frontend unit tests.

## Backend Testing
- Test runner & organization: use `pytest` for unit, integration, e2e, and contract tests organized under `backend/tests` with subfolders `unit`, `integration`, `e2e`, `contract`, `mocks`, and `support`.
- Configuration: configure test options in `backend/pytest.ini` and `backend/pyproject.toml` to set up test discovery and environment.
- Running tests: run the full suite with `cd backend && pytest` (or via your virtualenv/poetry command like `poetry run pytest`); CI can run targeted suites by folder path or using `-k`/`-m` filters.
- Test style: prefer parametrized tests for multiple input cases and keep tests focused on single behaviors.
- Isolation & mocks: isolate external dependencies (LLMs, network) using `monkeypatch` or `pytest-mock`; LLM and network mocks live in `backend/tests/mocks/llm_mocks.py` and reusable fixtures/helpers live in `backend/tests/support`.
- Coverage: generate coverage reports with `pytest --cov=backend --cov-report=html:backend/htmlcov` to produce browsable HTML coverage in `backend/htmlcov`.

## Frontend Testing
- Test runner & tooling: use TypeScript tests with Jest and React Testing Library, configured via `frontend/src/setupTests.ts`.
- Test organization: organize tests by scope—component and unit tests in `frontend/src/components/__tests__` and `frontend/tests/components`, integration tests in `frontend/src/tests/integration` and `frontend/tests/integration`, and end-to-end tests in `frontend/src/tests/e2e` and `frontend/tests/e2e`.
- Service & API tests: test client-side service modules and API wrappers under `frontend/src/services` and `frontend/tests/services`.
- Mocks & fixtures: mock network and LLM behavior using fixtures in `frontend/tests/mocks` to isolate external dependencies.
- Running tests: run the frontend test suite with `npm test` from the `frontend` directory; CI scripts and npm test configuration live in `frontend/package.json`.

## Coding conventions
- Class names use PascalCase (e.g., MyClass).
- variables and function names use snake_case (e.g., this_variable, compute_something).
- Follow PEP 8 with the exception:
  - allow line lengths up to 120 characters
- Use type annotations for public functions and methods.
- Keep functions single-responsibility.
- Prefer explicit is better than implicit; avoid clever one-liners that reduce readability.
- Use `dataclass` / NamedTuple for simple structured data.
- Use f-strings for formatting.

## Docstrings & comments
- Add concise triple-quoted docstrings for modules, classes, and public functions using Google style docstrings.
- For internal helper code prefer short inline comments explaining why (not what).
